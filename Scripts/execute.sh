#!/bin/bash -f

echo "---------------------------------------------------------------------------"
echo "-- Start owserver deamon for onewire to mqtt handling "
echo "---------------------------------------------------------------------------"

/usr/bin/owserver -c /etc/owfs.conf --foreground &


echo "  "
echo "---------------------------------------------------------------------------"
echo "-- Start owfs fuse deamon for onewire "
echo "---------------------------------------------------------------------------"

/usr/bin/owfs -s 127.0.0.1:4304 -m /mnt/1wire/


echo "  "
echo "---------------------------------------------------------------------------"
echo "-- Connected one wire devices "
echo "---------------------------------------------------------------------------"

owdir -s 127.0.0.1:4304

echo "  "
echo "---------------------------------------------------------------------------"
echo "-- Start the deamon "
echo "---------------------------------------------------------------------------"

node js/main.js
# npm start

echo "  "
echo "---------------------------------------------------------------------------"
echo "-- These lines shall never be executed "
echo "---------------------------------------------------------------------------"

exit 1

